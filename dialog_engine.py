# dialog_engine.py
from typing import Dict, Any, List

COLUMNS = [
    {"id": "perception", "ru": "Восприятие"},
    {"id": "motivation", "ru": "Мотивация"},
    {"id": "instrument", "ru": "Инструмент"},
]

def get_steps() -> List[Dict[str, Any]]:
    """
    6 шагов:
    1) Восприятие: сфера
    2) Восприятие: тип
    3) Мотивация: сфера
    4) Мотивация: тип
    5) Инструмент: сфера
    6) Инструмент: тип
    """
    steps = []
    for col in COLUMNS:
        cid = col["id"]
        cru = col["ru"]

        steps.append({
            "key": f"{cid}_sphere",
            "kind": "sphere",
            "column": cid,
            "title": f"{cru}: что ты замечаешь первым?",
            "prompt": (
                f"Представь: ты заходишь в новое место (кафе, дом, офис). "
                f"Что у тебя включается первым — даже если ты не хочешь?"
            ),
            "choices": [
                {"id": "matter", "label": "Сразу вижу/чувствую материальное: удобно/неудобно, деньги/цена/качество, как всё работает"},
                {"id": "emotions", "label": "Сразу ловлю атмосферу и людей: красиво/некрасиво, настроение, эмоции, энергия"},
                {"id": "meanings", "label": "Сразу считываю смысл: идея места, «зачем это», что за концепция, как звучит/что несёт"}
            ],
            "allow_free_text": True,
            "free_text_label": "Если хочешь — допиши 1–2 фразы своими словами:"
        })

        steps.append({
            "key": f"{cid}_type",
            "kind": "type",
            "column": cid,
            "title": f"{cru}: как ты с этим обычно обходишься?",
            "prompt": (
                "Когда ты это заметил(а), что дальше происходит чаще всего?"
            ),
            "choices": [
                {"id": "creator", "label": "Хочется улучшить/сделать красивее/починить/собрать в систему"},
                {"id": "communicator", "label": "Хочется обсудить/поделиться/вовлечь людей/сделать это интересным для других"},
                {"id": "manager", "label": "Хочется решить задачу: куда ведёт, что выгодно, какой план, как быстрее к результату"}
            ],
            "allow_free_text": True,
            "free_text_label": "Пример из жизни (коротко, по желанию):"
        })

    return steps
